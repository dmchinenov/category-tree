(function(e){function t(t){for(var a,s,l=t[0],o=t[1],d=t[2],c=0,_=[];c<l.length;c++)s=l[c],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&_.push(r[s][0]),r[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(_.length)_.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,l=1;l<n.length;l++){var o=n[l];0!==r[o]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/category-tree/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1725:function(e){e.exports=JSON.parse('{"success":true,"data":[{"id":6,"name":"Золото","price_multiplier":1000,"game_id":3,"created_at":1555732503,"updated_at":1555732503,"sort":5,"commission":3,"show_price":1,"show_count":1,"show_time":1,"multiple_sale":1,"status":1,"parent_id":null,"is_instant_delivery":0,"is_allow_multiple_offers":null,"isFinal":true},{"id":7,"name":"Рейды","price_multiplier":1,"game_id":3,"created_at":1555816711,"updated_at":1555816711,"sort":6,"commission":10,"show_price":0,"show_count":0,"show_time":0,"multiple_sale":0,"status":1,"parent_id":null,"is_instant_delivery":0,"is_allow_multiple_offers":null,"isFinal":false,"children":[{"id":8,"name":"Дазар\'Алор","price_multiplier":1,"game_id":3,"created_at":1555817073,"updated_at":1555817073,"sort":1,"commission":10,"show_price":0,"show_count":0,"show_time":0,"multiple_sale":1,"status":1,"parent_id":7,"is_instant_delivery":0,"is_allow_multiple_offers":null,"isFinal":false,"children":[{"id":85,"name":"Тратата","price_multiplier":1,"game_id":3,"created_at":1555817073,"updated_at":1555817073,"sort":1,"commission":10,"show_price":0,"show_count":0,"show_time":0,"multiple_sale":1,"status":1,"parent_id":7,"is_instant_delivery":0,"is_allow_multiple_offers":null,"isFinal":true},{"id":93,"name":"Борк","price_multiplier":1,"game_id":3,"created_at":1555919373,"updated_at":1555919373,"sort":3,"commission":10,"show_price":0,"show_count":1,"show_time":1,"multiple_sale":1,"status":1,"parent_id":7,"is_instant_delivery":0,"is_allow_multiple_offers":null,"isFinal":true}]},{"id":9,"name":"Горнило штормов","price_multiplier":1,"game_id":3,"created_at":1555919373,"updated_at":1555919373,"sort":3,"commission":10,"show_price":0,"show_count":1,"show_time":1,"multiple_sale":1,"status":1,"parent_id":7,"is_instant_delivery":0,"is_allow_multiple_offers":null,"isFinal":true}]},{"id":19,"name":"Серебро","price_multiplier":1000,"game_id":3,"created_at":1559631163,"updated_at":1559631163,"sort":13,"commission":10,"show_price":1,"show_count":1,"show_time":1,"multiple_sale":1,"status":1,"parent_id":null,"is_instant_delivery":0,"is_allow_multiple_offers":1,"isFinal":true},{"id":51,"name":"Серебро","price_multiplier":1000,"game_id":3,"created_at":1573635179,"updated_at":1574063841,"sort":25,"commission":10,"show_price":1,"show_count":1,"show_time":1,"multiple_sale":1,"status":1,"parent_id":null,"is_instant_delivery":0,"is_allow_multiple_offers":null,"isFinal":true}]}')},"1ce7":function(e,t,n){"use strict";n("623b")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("5f5b"),r=n("b1e0"),i=(n("2dd8"),n("f9e3"),n("f5df1"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.getData?n("div",{staticClass:"app__tree-container"},[n("div",{staticClass:"app__tree"},e._l(e.getData,(function(t){return n("Tree",{key:t.id,attrs:{element:t},on:{changeData:e.changeData}})})),1),e.getSelectedElement?n("b-list-group",{staticClass:"app__info"},e._l(Object.entries(e.getSelectedElement),(function(t,a){return n("b-list-group-item",{key:a,staticClass:"app__info-element"},[n("span",[e._v(e._s(t[0]+" : "+t[1]))])])})),1):e._e()],1):n("Start",{staticClass:"app__start"})],1)],1)},l=[],o=n("5530"),d=(n("4de4"),n("d3b7"),n("d81d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{staticClass:"start"},[n("h1",{staticClass:"start__title"},[e._v(" Hello ")]),n("b-button",{staticClass:"start__load-button",attrs:{size:"xl",variant:"primary",disabled:e.getLoadingStatus},on:{click:e.loadData}},[e.getLoadingStatus?n("b-spinner",{staticClass:"start__spinner",attrs:{small:""}}):e._e(),n("span",[e._v(e._s(e.buttonText)+" ")])],1)],1)}),u=[],c={name:"Start",methods:{loadData:function(){this.$store.dispatch("loadTreeData")}},computed:{getLoadingStatus:function(){return this.$store.getters.getLoadingStatus},buttonText:function(){return this.getLoadingStatus?"Загрузка...":"Получить данные"}}},_=c,m=(n("1ce7"),n("2877")),p=Object(m["a"])(_,d,u,!1,null,"514bf824",null),g=p.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{dragover:function(e){e.preventDefault()}}},[n("div",{staticClass:"tree",class:[e.dragStart?"tree_drag-start":"",e.dragOver?"tree_drag-over":""],attrs:{draggable:"true"},on:{dragstart:function(t){return e.startDrag(e.element)},dragend:e.endDrag,dragover:e.overDrag,dragleave:e.leaveDrag,drop:function(t){return e.dropDrag(e.element)},click:e.selectElement}},[n("div",{style:"width: "+e.paddingForChild+"px"}),n("b-icon",{staticClass:"tree__icon",class:[e.showChildren&&e.isParent?"tree__icon_show":"",e.isParent?"":"tree__icon_child"],attrs:{icon:e.isParent?"chevron-right":"circle-fill"}}),n("span",{staticClass:"tree__title"},[e._v(" "+e._s(e.element.name)+" ")])],1),e.showChildren&&e.element.children?n("div",e._l(e.element.children,(function(t){return n("Tree",{key:t.id,attrs:{element:t,"padding-for-child":e.paddingForChild+30},on:{changeData:e.changeData}})})),1):e._e()])},h=[],v=(n("a9e3"),{name:"Tree",props:{element:{type:Object,default:null},paddingForChild:{type:Number,default:20}},data:function(){return{showChildren:!1,dragStart:!1,dragOver:!1}},methods:{selectElement:function(){this.showChildren=!this.showChildren,this.$store.commit("setSelectedElement",this.element)},startDrag:function(e){this.dragStart=!0,this.$store.commit("dragModule/setStartDragElement",e)},endDrag:function(){this.dragStart=!1},overDrag:function(){this.dragOver=!0},leaveDrag:function(){this.dragOver=!1},dropDrag:function(e){this.dragEnter=!1,this.dragOver=!1,this.$store.commit("dragModule/setEndDragElement",e),this.$emit("changeData")},changeData:function(){this.$emit("changeData")}},computed:{isParent:function(){return this.element.children&&this.element.children.length>0}}}),D=v,w=(n("6e1c"),Object(m["a"])(D,f,h,!1,null,"6be62c4f",null)),b=w.exports,E={name:"App",components:{Start:g,Tree:b},methods:{deleteElement:function(e){var t=this,n=this.$store.getters["dragModule/getStartDragElement"],a=this.$store.getters["dragModule/getEndDragElement"];if(n.id===a.id)return e;var r=e.filter((function(e){return e.id!==n.id}));return r.map((function(e){return e.children?Object(o["a"])(Object(o["a"])({},e),{},{children:t.deleteElement(e.children)}):e}))},addElement:function(e){var t=this,n=this.$store.getters["dragModule/getEndDragElement"],a=this.$store.getters["dragModule/getStartDragElement"];return e.map((function(e){var r=e.id===n.id;return r?(e.children||i["default"].set(e,"children",[]),e.children.push(a),e):e.children?Object(o["a"])(Object(o["a"])({},e),{},{children:t.addElement(e.children)}):e}))},changeData:function(){var e=this.$store.getters["dragModule/getEndDragElement"],t=this.$store.getters["dragModule/getStartDragElement"];if(t.id!==e.id){var n=this.deleteElement(this.getData);this.$store.commit("setData",this.addElement(n)),this.$store.dispatch("updateTreeData")}}},computed:{getData:function(){return this.$store.getters.getData},getSelectedElement:function(){return this.$store.getters.getSelectedElement}}},y=E,S=(n("5c0b"),Object(m["a"])(y,s,l,!1,null,null,null)),O=S.exports,$=n("2f62"),C=n("1725");i["default"].use($["a"]);var j={namespaced:!0,state:{startDragElement:null,endDragElement:null},getters:{getStartDragElement:function(e){return e.startDragElement},getEndDragElement:function(e){return e.endDragElement}},mutations:{setStartDragElement:function(e,t){e.startDragElement=t},setEndDragElement:function(e,t){e.endDragElement=t},resetDragElements:function(e){e.startDragElement=null,e.endDragElement=null}},actions:{}};i["default"].use($["a"]);var x=new $["a"].Store({namespaced:!0,modules:{dragModule:j},state:{appLoading:!1,data:null,selectedElement:null},getters:{getLoadingStatus:function(e){return e.appLoading},getData:function(e){return e.data},getSelectedElement:function(e){return e.selectedElement}},mutations:{setLoading:function(e,t){e.appLoading=t},setData:function(e,t){e.data=t},setSelectedElement:function(e,t){e.selectedElement=e.selectedElement===t?null:t}},actions:{loadTreeData:function(e){var t=e.commit;t("setLoading",!0),setTimeout((function(){t("setData",C.data),t("setLoading",!1)}),2e3)},updateTreeData:function(){}}});i["default"].config.productionTip=!1,i["default"].use(a["a"]),i["default"].use(r["a"]),new i["default"]({store:x,render:function(e){return e(O)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"623b":function(e,t,n){},"6e1c":function(e,t,n){"use strict";n("f19e")},"9c0c":function(e,t,n){},f19e:function(e,t,n){}});
//# sourceMappingURL=app.1ad7bfc6.js.map